{{ block title }}Decision{{ endblock }}
{{ block content }}
<!DOCTYPE html>
<html>

<head>
    <style>
        datalist {
            display: flex;
            justify-content: space-between;
            color: darkblue;
            width: 80%;
        }

        input {
            width: 80%;
        }
    </style>
</head>

<body>
    <p>
        You are endowed with 0 dollars, and the other is endowed with 0 dollars.
        You have to decide between two outcomes:
    </p>
    <dl>
        <dt>Option 1</dt>
        <dd>You gain 1 dollar and the other gains 10 dollars.</dd>
        <dt>Option 2</dt>
        <dd>You gain 5 dollars and the other gains z dollars, where z = <span id="z_value_display">20</span> dollars</dd>
    </dl>

    {{ formfield "option" }}

    <p>
        Choose a value for z:
    </p>

    <div style="display: none;">
        {{ formfield "z_value" }}
    </div>

    <input type="range" list="tickmarks" id="z_value_range" min="0" max="20" step="1" value="10"
        oninput="updateChart()">

    <datalist id="tickmarks">
        <option value="0" label="00"></option>
        <option value="1" label="01"></option>
        <option value="2" label="02"></option>
        <option value="3" label="03"></option>
        <option value="4" label="04"></option>
        <option value="5" label="05"></option>
        <option value="6" label="06"></option>
        <option value="7" label="07"></option>
        <option value="8" label="08"></option>
        <option value="9" label="09"></option>
        <option value="10" label="10"></option>
        <option value="11" label="11"></option>
        <option value="12" label="12"></option>
        <option value="13" label="13"></option>
        <option value="14" label="14"></option>
        <option value="15" label="15"></option>
        <option value="16" label="16"></option>
        <option value="17" label="17"></option>
        <option value="18" label="18"></option>
        <option value="19" label="19"></option>
        <option value="20" label="20"></option>
    </datalist>

    <div id="grafico_01"></div>
    <div id="grafico_02"></div>
    <div id="grafico_03"></div>

    {{ next_button }}

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script type="text/javascript">
        var chart;
        var z_value_range = document.getElementById('z_value_range');
        var z_value_display = document.getElementById('z_value_display');

        document.addEventListener('DOMContentLoaded', function () {
            chart = Highcharts.chart('grafico_01', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Column Chart'
                },
                xAxis: {
                    categories: ['Option 1', 'Option 2']
                },
                series: [
                    {
                        name: 'Yourself',
                        data: [1, 5]
                    },
                    {
                        name: 'Other player',
                        data: [10, 10]
                    }
                ]
            });
        });

        document.addEventListener('DOMContentLoaded', function () {
            chart1 = Highcharts.chart('grafico_01', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Column Chart'
                },
                xAxis: {
                    categories: ['Option 1', 'Option 2']
                },
                series: [
                    {
                        name: 'Yourself',
                        data: [1, 5]
                    },
                    {
                        name: 'Other player',
                        data: [10, 10]
                    }
                ]
            });
            chart2 = Highcharts.chart('grafico_02', {
                title: {
                    text: 'Line Chart'
                },
                xAxis: {
                    categories: ['Option 1', 'Option 2']
                },
                series: [
                    {
                        name: 'Yourself',
                        data: [1, 5]
                    },
                    {
                        name: 'Other player',
                        data: [10, 10]
                    }
                ]
            });
            chart3 = Highcharts.chart('grafico_03', {
                chart: {
                    type: 'bar'
                },
                title: {
                    text: 'Bar Chart'
                },
                xAxis: {
                    categories: ['Option 1', 'Option 2']
                },
                series: [
                    {
                        name: 'Yourself',
                        data: [1, 5]
                    },
                    {
                        name: 'Other player',
                        data: [10, 10]
                    }
                ]
            });

        });

        function updateChart() {
            var z_value = parseInt(z_value_range.value);
            z_value_display.textContent = z_value;
            chart1.series[1].data[1].update(z_value);
            chart2.series[1].data[1].update(z_value);
            chart3.series[1].data[1].update(z_value);
            // Set the value of the range in the form and player variable
            forminputs['z_value'].value = `${z_value}`;
        }
    </script>
</body>

</html>
{{ endblock }}