
{{ block title }}Aritmética{{ endblock }}
{{ block content }}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sumas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>

    {{ next_button}}
{{ formfield_errors 'limosna_01' }}
    <p>
        Please answer the following questions.
    </p>

    {{ formfield "aritmetica_001" }}
    {{ formfield "aritmetica_002" }}
    {{ formfield "aritmetica_003" }}
    {{ formfield "aritmetica_004" }}
    {{ formfield "aritmetica_005" }}
    {{ formfield "aritmetica_006" }}
    {{ formfield "aritmetica_007" }}
    {{ formfield "aritmetica_008" }}
    {{ formfield "aritmetica_009" }}
    {{ formfield "aritmetica_010" }}
    {{ formfield "aritmetica_011" }}
    {{ formfield "aritmetica_012" }}
    {{ formfield "aritmetica_013" }}
    {{ formfield "aritmetica_014" }}
    {{ formfield "aritmetica_015" }}
    {{ formfield "aritmetica_016" }}
    {{ formfield "aritmetica_017" }}
    {{ formfield "aritmetica_018" }}
    {{ formfield "aritmetica_019" }}
    {{ formfield "aritmetica_020" }}
    {{ formfield "aritmetica_021" }}
    {{ formfield "aritmetica_022" }}
    {{ formfield "aritmetica_023" }}
    {{ formfield "aritmetica_024" }}
    {{ formfield "aritmetica_025" }}
    {{ formfield "aritmetica_026" }}
    {{ formfield "aritmetica_027" }}
    {{ formfield "aritmetica_028" }}
    {{ formfield "aritmetica_029" }}
    {{ formfield "aritmetica_030" }}
    {{ formfield "aritmetica_031" }}
    {{ formfield "aritmetica_032" }}
    {{ formfield "aritmetica_033" }}
    {{ formfield "aritmetica_034" }}
    {{ formfield "aritmetica_035" }}
    {{ formfield "aritmetica_036" }}
    {{ formfield "aritmetica_037" }}
    {{ formfield "aritmetica_038" }}
    {{ formfield "aritmetica_039" }}
    {{ formfield "aritmetica_040" }}
    {{ formfield "aritmetica_041" }}
    {{ formfield "aritmetica_042" }}
    {{ formfield "aritmetica_043" }}
    {{ formfield "aritmetica_044" }}
    {{ formfield "aritmetica_045" }}
    {{ formfield "aritmetica_046" }}
    {{ formfield "aritmetica_047" }}
    {{ formfield "aritmetica_048" }}
    {{ formfield "aritmetica_049" }}
    {{ formfield "aritmetica_050" }}
    {{ formfield "aritmetica_051" }}
    {{ formfield "aritmetica_052" }}
    {{ formfield "aritmetica_053" }}
    {{ formfield "aritmetica_054" }}
    {{ formfield "aritmetica_055" }}
    {{ formfield "aritmetica_056" }}
    {{ formfield "aritmetica_057" }}
    {{ formfield "aritmetica_058" }}
    {{ formfield "aritmetica_059" }}
    {{ formfield "aritmetica_060" }}
    {{ formfield "aritmetica_061" }}
    {{ formfield "aritmetica_062" }}
    {{ formfield "aritmetica_063" }}
    {{ formfield "aritmetica_064" }}
    {{ formfield "aritmetica_065" }}
    {{ formfield "aritmetica_066" }}
    {{ formfield "aritmetica_067" }}
    {{ formfield "aritmetica_068" }}
    {{ formfield "aritmetica_069" }}
    {{ formfield "aritmetica_070" }}
    {{ formfield "aritmetica_071" }}
    {{ formfield "aritmetica_072" }}
    {{ formfield "aritmetica_073" }}
    {{ formfield "aritmetica_074" }}
    {{ formfield "aritmetica_075" }}
    {{ formfield "aritmetica_076" }}
    {{ formfield "aritmetica_077" }}
    {{ formfield "aritmetica_078" }}
    {{ formfield "aritmetica_079" }}
    {{ formfield "aritmetica_080" }}
    {{ formfield "aritmetica_081" }}
    {{ formfield "aritmetica_082" }}
    {{ formfield "aritmetica_083" }}
    {{ formfield "aritmetica_084" }}
    {{ formfield "aritmetica_085" }}
    {{ formfield "aritmetica_086" }}
    {{ formfield "aritmetica_087" }}
    {{ formfield "aritmetica_088" }}
    {{ formfield "aritmetica_089" }}
    {{ formfield "aritmetica_090" }}
    {{ formfield "aritmetica_091" }}
    {{ formfield "aritmetica_092" }}
    {{ formfield "aritmetica_093" }}
    {{ formfield "aritmetica_094" }}
    {{ formfield "aritmetica_095" }}
    {{ formfield "aritmetica_096" }}
    {{ formfield "aritmetica_097" }}
    {{ formfield "aritmetica_098" }}
    {{ formfield "aritmetica_099" }}
    {{ formfield "aritmetica_100" }}
    <div style="display: none;">
        {{ formfield "limosna_01" }}
        {{ formfield "limosna_02" }}
        {{ formfield "limosna_03" }}
        {{ formfield "limosna_04" }}
        {{ formfield "limosna_05" }}
        {{ formfield "limosna_06" }}
        {{ formfield "limosna_07" }}
        {{ formfield "limosna_08" }}
    </div>


    {{ next_button }}

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="modal fade" id="Modal_01" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Black Knight wants your money</h5>
                        </div>
                        <div class="modal-body">
                            <img src="{{ static 'imagen01.jpg' }}" />
                            <p><br>None shall pass. I move for no man.</p>
                            <form id="donationForm">
                                <div class="form-group">
                                    <label for="donacion_01">¿Cuánto dinero le das?</label>
                                    <input type="number" class="form-control" id="donacion_01"
                                        aria-describedby="amountHelp" required>
                                    <small id="amountHelp" class="form-text text-muted">Tienes disponibles $<span
                                            id="initialAmount"></span> pesos.</small>
                                    <div class="invalid-feedback">
                                        Por favor, ingresa una cantidad.
                                    </div>
                                    <div class="invalid-feedback" id="exceedFeedback">
                                        La cantidad ingresada no puede exceder el monto disponible.
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" id="submitButton">Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script type="text/javascript">

        let morralla = js_vars.dinero_inicial;

        $(document).ready(function () {
            // Display the initial amount
            document.getElementById('initialAmount').textContent = morralla;

            // Show the modal after 2 seconds
            setTimeout(function () {
                $('#Modal_01').modal('show');
            }, 2000);

            // Validate input and handle form submission
            document.getElementById('submitButton').addEventListener('click', function (event) {
                var donationAmount_01 = parseFloat(document.getElementById('donacion_01').value);
                if (isNaN(donationAmount_01) || donationAmount_01 <= 0) {
                    event.preventDefault(); // Prevent the modal from closing
                    document.getElementById('donacion_01').classList.add('is-invalid');
                    document.getElementById('exceedFeedback').style.display = 'none';
                } else if (donationAmount_01 > morralla) {
                    event.preventDefault(); // Prevent the modal from closing
                    document.getElementById('donacion_01').classList.add('is-invalid');
                    document.getElementById('exceedFeedback').style.display = 'block';
                } else {
                    document.getElementById('donacion_01').classList.remove('is-invalid');
                    document.getElementById('exceedFeedback').style.display = 'none';
                    console.log('Donation Amount:', donationAmount_01);

                    // Save the value to a variable or send it to the server
                    var savedAmount_01 = donationAmount_01;

                    // Update the morralla value
                    morralla -= savedAmount_01;

                    // Update the displayed amount
                    document.getElementById('initialAmount').textContent = morralla;

                    // Manually trigger the modal to close
                    var myModalEl = document.getElementById('Modal_01');
                    var modal = bootstrap.Modal.getInstance(myModalEl);
                    modal.hide();
                    debugger;
                    // Set the value of the field in the form and player variable
                    forminputs.limosna_01.value = `${savedAmount_01}`;


                }
            });
        });
    </script>
</body>
</html>
{{ endblock }}